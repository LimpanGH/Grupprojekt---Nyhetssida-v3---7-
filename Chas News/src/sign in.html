<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <title>Sign in</title>
</head>
<body>
    <!-- Create form registeration  -->
   <div id="login-box">
    <div class="left">
        <h1 >Chas News</h1>
        <h4>Log in to your Chas News account</h4>
        <p>Don't have an account? <a href="sign up.html">Sign up.</a></p>
        <input type="email" id="email" name="email" placeholder="Email address">
        <input type="password" id="password" name="password" placeholder="Password">
        <input type="submit" id="login" name="login" class="btn btn-light " type="button" value="Login">
        <input type="submit" id="logout" name="login" class="btn btn-light " type="button" value="Logout">
        
    </div>
    <div class="or"><h1 id="or">OR</h1></div>
    <div class="right">
        <h4 id="socialmedia">Sign in with</h4>
        <button class="btn btn-primary facebook" id="facebook">Log in with facebook</button>
        <button class="btn btn-primary google" id="google">Log in with Google</button>
    
    </div>
    
   </div>

   <script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase,set,ref,update } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    import { getAuth,  createUserWithEmailAndPassword, signInWithEmailAndPassword,onAuthStateChanged,signOut, signInWithPopup} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { FacebookAuthProvider } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDpbyLddfx9M9rfXsdeR2RdYZuLvK62L1I",
      authDomain: "chas-news-697bd.firebaseapp.com",
      databaseURL: "https://chas-news-697bd-default-rtdb.firebaseio.com",
      projectId: "chas-news-697bd",
      storageBucket: "chas-news-697bd.appspot.com",
      messagingSenderId: "137415225220",
      appId: "1:137415225220:web:a3a6dc48cb504508a2b7d1",
      measurementId: "G-4ECMHSRMRT"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth(app);
    const analytics = getAnalytics(app);
    const provider = new GoogleAuthProvider();
    const providerF = new FacebookAuthProvider();



    login.addEventListener('click',(e)=>{
        var email =document.getElementById('email').value;
        var password =document.getElementById('password').value;

        createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed up 
          const user = userCredential.user;
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          
          alert(errorMessage);
          
        });
   

    });
    const user = auth.currentUser;
    onAuthStateChanged(auth, (user) => {
        if (user) {
          // User is signed in, see docs for a list of available properties
          // https://firebase.google.com/docs/reference/js/auth.user
          const uid = user.uid;
          // ...
        } else {
          // User is signed out
          // ...
        }
      });
      logout.addEventListener('click',(e)=>{
        
        signOut(auth).then(() => {
            alert('user loged out');
        // Sign-out successful.
        }).catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            
            alert(errorMessage);
        // An error happened.
        });

      });

google.addEventListener('click',(e)=>{
    signInWithPopup(auth, provider)
    .then((result) => {
        // This gives you a Google Access Token. You can use it to access the Google API.
        const credential = GoogleAuthProvider.credentialFromResult(result);
        const token = credential.accessToken;
        // The signed-in user info.
        const user = result.user;
        // IdP data available using getAdditionalUserInfo(result)
        // ...
    }).catch((error) => {
        // Handle Errors here.
        const errorCode = error.code;
        const errorMessage = error.message;
        // The email of the user's account used.
        const email = error.customData.email;
        // The AuthCredential type that was used.
        const credential = GoogleAuthProvider.credentialFromError(error);
        // ...
    });
});
facebook.addEventListener('click',(e)=>{
    signInWithPopup(auth, providerF)
  .then((result) => {
    // The signed-in user info.
    const user = result.user;

    // This gives you a Facebook Access Token. You can use it to access the Facebook API.
    const credential = FacebookAuthProvider.credentialFromResult(result);
    const accessToken = credential.accessToken;

    // IdP data available using getAdditionalUserInfo(result)
    // ...
  })
  .catch((error) => {
    // Handle Errors here.
    const errorCode = error.code;
    const errorMessage = error.message;
    // The email of the user's account used.
    const email = error.customData.email;
    // The AuthCredential type that was used.
    const credential = FacebookAuthProvider.credentialFromError(error);

    // ...
  });

});



  </script>

  
    
 
  

    
   
    
</body>
</html>