<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <title>Sign up</title>
</head>
<body>
    <!-- Create form registeration  -->
   <div id="login-box">
    <div class="left">
        <h1 >Chas News</h1>
        <h4>Create your Chas News account</h4>
        <p> Already have an account? <a href="sign in.html">Sign in.</a></p>
        <input type="text" id="username" name="username" placeholder="Username">
        <input type="email" id="email" name="email" placeholder="Email address">
        <input type="password" id="password" name="password" placeholder="Password">
        <input type="submit" id="signUp" name="signup-submit" class="btn btn-light " type="button" value="Create Account">
        
    </div>
    <div class="or"><h1 id="or">OR</h1></div>
    <div class="right">
        <h3 id="socialmedia">Sign in with</h3>
        <button class="btn btn-primary facebook" id="facebook">Sign Up  with facebook</button>
        <button class="btn btn-primary google" id="google">Sign Up with Google</button>
    
    </div>
    
   </div>

   <script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase,set,ref,update } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword,  signInWithPopup} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { FacebookAuthProvider } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDpbyLddfx9M9rfXsdeR2RdYZuLvK62L1I",
      authDomain: "chas-news-697bd.firebaseapp.com",
      databaseURL: "https://chas-news-697bd-default-rtdb.firebaseio.com",
      projectId: "chas-news-697bd",
      storageBucket: "chas-news-697bd.appspot.com",
      messagingSenderId: "137415225220",
      appId: "1:137415225220:web:a3a6dc48cb504508a2b7d1",
      measurementId: "G-4ECMHSRMRT"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth(app);
    const analytics = getAnalytics(app);
    const provider = new GoogleAuthProvider();
    const providerF = new FacebookAuthProvider();




   // Function to redirect to another page
function redirectToPage(user) {
    // Redirect to another HTML page (replace 'dashboard.html' with the actual file name)
    window.location.href = 'http://localhost:5173/';
  
    // Optionally, you can pass user information to the new page
    // For example, you can use sessionStorage to store user information temporarily
    sessionStorage.setItem('loggedInUser', JSON.stringify(user));
  }
  
  // Sign Up
  signUp.addEventListener('click', (e) => {
    var username = document.getElementById('username').value;
    var email = document.getElementById('email').value;
    var password = document.getElementById('password').value;
  
    createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        const user = userCredential.user;
  
        set(ref(database, 'users/' + user.uid), {
          username: username,
          email: email
        });
        alert("Sign up successfuled! ")
  
        // Redirect to another HTML page after successful sign-up
        redirectToPage(user);
  
      })
      .catch((error) => {
        const errorMessage = error.message;
        alert(errorMessage);
      });
  });
  
  // Google Sign In
  google.addEventListener('click', (e) => {
    signInWithPopup(auth, provider)
      .then((result) => {
        const user = result.user;
       
        // Redirect to another HTML page after successful sign-in
        redirectToPage(user);
        
      })
      .catch((error) => {
        const errorMessage = error.message;
        alert(errorMessage);
      });
  });
  
  // Facebook Sign In
  facebook.addEventListener('click', (e) => {
    signInWithPopup(auth, providerF)
      .then((result) => {
        const user = result.user;
        
        // Redirect to another HTML page after successful sign-in
        redirectToPage(user);
      })
      .catch((error) => {
        const errorMessage = error.message;
        alert(errorMessage);
      });
  });
  



  </script>


    
</body>
</html>