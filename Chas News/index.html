<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/style.css" />
    <link rel="stylesheet" href="src/main.css" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css">

    <!-- Bootstrap JS (Popper.js and Bootstrap JS) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"></script>

    <script
      src="https://kit.fontawesome.com/14fab5134a.js"
      crossorigin="anonymous"
    ></script>
    <script type="module" src="src/main.js" defer></script>
    <title>Chas News</title>
  </head>
 
 
  <body>
    <header class="d-md-flex justify-content-between align-items-center">
      <h1 class="display-1 text-left">Chas News</h1>
      <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button class="btn btn-success me-md-2" type="button">Prenumera</button>
          <!-- Place where you want to display login/logout -->
        <div id="userDisplay"></div>
        
      </div>
    </header>

    <!-- Skapa Navbar -->
    <nav class="navbar navbar-expand-lg bg-white">
      <div class="container container-fluid">
        <a class="navbar-brand" href="#">Nyheter</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarScroll"
          aria-controls="navbarScroll"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarScroll">
          <ul
            class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll"
            style="--bs-scroll-height: 100px"
          >
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#"
                >Sverige</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Sport</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Tech</a>
            </li>
            <li class="nav-item">
              <a
                id="favorites"
                class="nav-link active"
                aria-current="page"
                href="#"
                >Favorites</a
              >
            </li>
          </ul>

          <!-- Search input -->
          <form class="d-flex" role="search">
            <input
              id="search-input"
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button
              class="btn btn-outline-success"
              type="submit"
              id="search-button"
            >
              Search
            </button>
          </form>
          <!-- ****************Dark and white home page *********************  -->
         
        </div>
      </div>
    </nav>

    <main class="container text-center bg-light p-0 pe-2 pt-2 d-lg-grid">
      <div class="row align-items-start">
        <div id="articlesContainer" class="col-12 col-lg-8"></div>

        <aside class="ms-0 me-3 bg-white p-2 col">
          <h6>Senast</h6>
          <button
            type="button"
            class="source-aside w-100 border-0 border-bottom bg-white text-start p-0 mt-3"
          >
            <p class="mb-2">
              Lorem ipsum dolor sit amet consectetur, adipisicing elit. Atque,
              iure?
            </p>
            <div id="dateLocal" class="d-flex gap-1 text-primary pb-1">
              <p id="date-aside" class="p-0 m-0">10:00</p>
              <p id="local-aside" class="p-0 m-0">- Sverige</p>
            </div>
          </button>
        </aside>
      </div>
    </main>

    <footer></footer>
    <script>
    
            // Function to update the login/logout display
      function updateLoginDisplay() {
        const userDisplay = document.getElementById('userDisplay');
        const loggedInUser = JSON.parse(sessionStorage.getItem('loggedInUser')); 
       
       


      
        //const userToStore = {
         
         //displayName: `${loggedInUser.displayName.u}`
         
     // };
      // sessionStorage.setItem('loggedInUser', JSON.stringify(userToStore));
         
         
        console.log(loggedInUser);

        if (loggedInUser) {
          // User is logged in, display user information
          userDisplay.innerHTML = `
          <div style="background-color: #f0f0f0; padding: 10px; border-radius: 10px;">
            <div id="welcomeMessage" style="cursor: pointer;">
              Welcome,  ${loggedInUser.displayName}! ▼
            </div>
            <div id="titleList" style="display: flex; flex-direction: column; background-color: #fff; border: 1px solid #ccc; position: absolute; z-index: 1;">
              <p style="margin:1rem;font-style: bold; font-weight: 600;"> <i class="fa-regular fa-star"style="padding-right:2rem;  cursor: pointer;" id="favorites" aria-current="page"></i>Sparade artiklar</p>
              <p style="margin: 1rem;font-style: bold; font-weight: 600;"><i class="fa-regular fa-clock" style="padding-right:2rem;"></i>Läs historik</p>
              <p style="margin:1rem;font-style: bold;font-weight: 600;"> <i class="fa-regular fa-bell" style="padding-right:2rem;"></i>Push noticer</p>
              <button id="logoutBtn" style="margin-bottom:0.8rem; margin-right:2rem; background-color:#DE667B; color: #fff; border: none; width:150px;padding-left:6px; border-radius: 5px;"> <i class="fa-solid fa-arrow-right-from-bracket" style="padding-right:2rem;"></i>Logout</button>
              
            </div>
           
          </div>`
          document.getElementById('welcomeMessage').addEventListener('click', function() {
            var titleList = document.getElementById('titleList');
            titleList.style.display = (titleList.style.display === 'block') ? 'none' : 'block';
          });

          // Add click event listener for logout
          document.getElementById('logoutBtn').addEventListener('click', () => {
            // Clear session storage on logout
            sessionStorage.removeItem('loggedInUser');
            // Reload the page after logout
            location.reload();
          });
        } else {
          // User is not logged in, display login button
          userDisplay.innerHTML = ' <button class="btn btn-light text-green" type="button" id="loginBtn" ><a style="color: black;"href="src/sign up.html"  >Logga in</a></button>';

          // Add click event listener for login
          document.getElementById('loginBtn').addEventListener('click', () => {
            // Redirect to the login page
            window.location.href = 'login.html';
          });
        }
      }

      // Check login status on page load
      updateLoginDisplay();

    </script>

    <!-- src/App.vue -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <template id="article-template">
      <article
        class="border-start border-danger border-5 sourceArticle mb-4 text-start"
      >
        <div class="category center p-0">
          <button class="btn pt-0 pb-2 px-0 w-100">
            <a
              href=""
              class="categoryAnchorTag btn rounded-0 bg-white d-flex justify-content-between w-100 align-content-center"
            >
              <h6 class="categoryName m-0 p-0 align-self-center"></h6>
              <i class="fa-solid fa-arrow-right m-0"></i>
            </a>
          </button>
        </div>
        <div class="contentDiv bg-white">
          <img class="w-100" src="${article.urlToImage}" alt="" />
          <div class="text ps-2 pb-2">
            <!-- <h5 class="pt-3 text-primary">Sports</h5> -->
            <div
              class="d-flex pb-2 pt-1 align-content-center justify-content-between gap-2"
            >
              <h3 class="newsTitle m-0 p-0"></h3>
              <button class="favorite m-0 p-0 pe-3 bg-white border-0">
                <i
                  class="starIcon fa-regular fa-star align-self-center text-primary"
                ></i>
              </button>
            </div>
            <p class="articleDescription pb-2 pe-2 m-0"></p>
            <a class="text-danger" href="" target="_blank">Mer...</a>
          </div>
        </div>
      </article>
    </template>
  </body>
</html>
